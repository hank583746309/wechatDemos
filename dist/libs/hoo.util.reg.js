'use strict';

if (typeof window == 'undefined') {
  window = getApp();
}
var Hoo = window.Hoo || {};

var REG_MOBILE = '';
var Arr = [],
    Brr = [];
Arr['A'] = 1;Arr['B'] = 2;Arr['C'] = 3;Arr['D'] = 4;Arr['E'] = 5;Arr['F'] = 6;Arr['G'] = 7;Arr['H'] = 8;Arr['J'] = 1;Arr['K'] = 2;Arr['L'] = 3;Arr['M'] = 4;Arr['N'] = 5;Arr['P'] = 7;Arr['R'] = 9;Arr['S'] = 2;Arr['T'] = 3;Arr['U'] = 4;Arr['V'] = 5;Arr['W'] = 6;Arr['X'] = 7;Arr['Y'] = 8;Arr['Z'] = 9;Arr['1'] = 1;Arr['2'] = 2;Arr['3'] = 3;Arr['4'] = 4;Arr['5'] = 5;Arr['6'] = 6;Arr['7'] = 7;Arr['8'] = 8;Arr['9'] = 9;Arr['0'] = 0;Brr[1] = 8;Brr[2] = 7;Brr[3] = 6;Brr[4] = 5;Brr[5] = 4;Brr[6] = 3;Brr[7] = 2;Brr[8] = 10;Brr[9] = 0;Brr[10] = 9;Brr[11] = 8;Brr[12] = 7;Brr[13] = 6;Brr[14] = 5;Brr[15] = 4;Brr[16] = 3;Brr[17] = 2;

Hoo.define('Hoo.util.Reg', {
  statics: {
    /*** 执行正则校验 */
    exec: function exec(reg, value) {
      if (typeof reg == 'undefined' || null == reg || typeof value == 'undefined') {
        return false;
      }
      reg = new RegExp(reg);
      return reg.test(value);
    },
    /*** 银行卡校验 */
    bankCard: function bankCard(cardNum) {
      if (cardNum.length < 16 || cardNum.length > 19) {
        return false;
      }
      var num = /^\d*$/; //全数字
      if (!num.exec(cardNum)) {
        return false;
      }
      //开头6位
      var strBin = "10,18,30,35,37,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,60,62,65,68,69,84,87,88,94,95,98,99";
      if (strBin.indexOf(cardNum.substring(0, 2)) == -1) {
        return false;
      }
      var lastNum = cardNum.substr(cardNum.length - 1, 1); //取出最后一位（与luhm进行比较）

      var first15Num = cardNum.substr(0, cardNum.length - 1); //前15或18位
      var newArr = new Array();
      for (var i = first15Num.length - 1; i > -1; i--) {
        //前15或18位倒序存进数组
        newArr.push(first15Num.substr(i, 1));
      }
      var arrJiShu = new Array(); //奇数位*2的积 <9
      var arrJiShu2 = new Array(); //奇数位*2的积 >9

      var arrOuShu = new Array(); //偶数位数组
      for (var j = 0; j < newArr.length; j++) {
        if ((j + 1) % 2 == 1) {
          //奇数位
          if (parseInt(newArr[j]) * 2 < 9) arrJiShu.push(parseInt(newArr[j]) * 2);else arrJiShu2.push(parseInt(newArr[j]) * 2);
        } else //偶数位
          arrOuShu.push(newArr[j]);
      }

      var jishu_child1 = new Array(); //奇数位*2 >9 的分割之后的数组个位数
      var jishu_child2 = new Array(); //奇数位*2 >9 的分割之后的数组十位数
      for (var h = 0; h < arrJiShu2.length; h++) {
        jishu_child1.push(parseInt(arrJiShu2[h]) % 10);
        jishu_child2.push(parseInt(arrJiShu2[h]) / 10);
      }

      var sumJiShu = 0; //奇数位*2 < 9 的数组之和
      var sumOuShu = 0; //偶数位数组之和
      var sumJiShuChild1 = 0; //奇数位*2 >9 的分割之后的数组个位数之和
      var sumJiShuChild2 = 0; //奇数位*2 >9 的分割之后的数组十位数之和
      var sumTotal = 0;
      for (var m = 0; m < arrJiShu.length; m++) {
        sumJiShu = sumJiShu + parseInt(arrJiShu[m]);
      }

      for (var n = 0; n < arrOuShu.length; n++) {
        sumOuShu = sumOuShu + parseInt(arrOuShu[n]);
      }

      for (var p = 0; p < jishu_child1.length; p++) {
        sumJiShuChild1 = sumJiShuChild1 + parseInt(jishu_child1[p]);
        sumJiShuChild2 = sumJiShuChild2 + parseInt(jishu_child2[p]);
      }
      //计算总和
      sumTotal = parseInt(sumJiShu) + parseInt(sumOuShu) + parseInt(sumJiShuChild1) + parseInt(sumJiShuChild2);

      //计算Luhm值
      var k = parseInt(sumTotal) % 10 == 0 ? 10 : parseInt(sumTotal) % 10;
      var luhm = 10 - k;

      return lastNum == luhm;
    },
    isNumber: function isNumber() {
      if (arguments.length == 0) {
        return false;
      }
      var flag = true,
          reg = /^[0-9]+.?[0-9]*$/,
          num;
      for (var i = 0, len = arguments.length; i < len; i++) {
        num = arguments[i];
        if (typeof num == 'undefined' || null == num || isNaN(Number(num))) {
          flag = false;break;
        }
        //if (typeof num == 'undefined' || null == num || !reg.test(num)) { flag = false; break; }
      }
      return flag;
    },
    /*** 统一社会信用代码 */
    creditCode: function creditCode(code) {
      if (typeof code == 'undefined' || Hoo.isEmpty(code) || code.length != 18) {
        return false;
      }
      var baseCode = "0123456789ABCDEFGHJKLMNPQRTUWXY",
          baseCodeArray = baseCode.split(""),
          codes = {};
      for (var i = 0; i < baseCode.length; i++) {
        codes[baseCodeArray[i]] = i;
      }
      var codeArray = code.split(""),
          check = codeArray[17];
      if (baseCode.indexOf(check) < 0) {
        return false;
      }
      var wi = [1, 3, 9, 27, 19, 26, 16, 17, 20, 29, 25, 13, 8, 24, 10, 30, 28],
          sum = 0;
      for (var i = 0; i < 17; i++) {
        var key = codeArray[i];
        if (baseCode.indexOf(key) == -1) {
          return false;
        }
        sum += codes[key] * wi[i];
      }
      var value = 31 - sum % 31;
      return value == codes[check];
    },
    /*** 邮箱校验 */
    email: function email(_email) {
      if (typeof _email == 'undefined' || null == _email) {
        return false;
      }
      var reg = /^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;
      return reg.test(_email);
    },
    /*** 手机号校验 */
    mobile: function mobile(_mobile) {
      if (typeof _mobile == 'undefined' || null == _mobile) {
        return false;
      }
      var reg = /^1[3|4|5|7|8][0-9]{9}$/; // /^1[0-9]{10}$/
      return reg.test(_mobile);
    },
    /*** web URL 校验 */
    url: function url(str) {
      if (typeof str == 'undefined' || null == str) {
        return false;
      }
      return !!str.match(/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g);
    },
    /*** 是否全为中文 */
    chinese: function chinese(str) {
      //var reg = /^[u4E00-u9FA5]+$/; 【是否包含中文】
      //return typeof str !== 'undefined' && null != str && !reg.test(str);
      if (typeof str == 'undefined' || null == str || '' == str) {
        return false;
      }
      var flag = true;
      for (var i = 0; i < str.length; i++) {
        if (str.charCodeAt(i) <= 255) {
          flag = false;break;
        }
      }
      return flag;
    },
    /*** vin 检测 例： WP0AA2978BL012976 */
    vin: function vin(_vin) {
      var sKYZF = "ABCDEFGHJKLMNPRSTUVWXYZ1234567890";
      var sJYW = '';
      var bl = false;
      var blKYZF = false;
      if (_vin.length == 17) {
        var iJQS = 0,
            intTemp = 0,
            ht = Arr,
            htZM = Brr;
        try {
          _vin = _vin.toUpperCase();
          for (var i = 0; i < _vin.length; i++) {
            if (sKYZF.indexOf(_vin.substr(i, 1)) != -1) {
              blKYZF = true;
              iJQS = iJQS + parseInt(ht[_vin.substr(i, 1)]) * parseInt(htZM[i + 1]);
            } else {
              blKYZF = false;
              break;
            }
          }
          if (blKYZF) {
            intTemp = iJQS % 11;
            if (intTemp == 10) {
              sJYW = "X";
            } else {
              sJYW = intTemp.toString();
            }
            if (sJYW == _vin.substr(8, 1)) bl = true;
          } else {
            bl = false;
          }
        } catch (err) {
          bl = false;
        }
      }
      return bl;
    }
  }
});

Hoo.reg = Hoo.util.Reg;

module.exports = Hoo;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvby51dGlsLnJlZy5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJnZXRBcHAiLCJIb28iLCJSRUdfTU9CSUxFIiwiQXJyIiwiQnJyIiwiZGVmaW5lIiwic3RhdGljcyIsImV4ZWMiLCJyZWciLCJ2YWx1ZSIsIlJlZ0V4cCIsInRlc3QiLCJiYW5rQ2FyZCIsImNhcmROdW0iLCJsZW5ndGgiLCJudW0iLCJzdHJCaW4iLCJpbmRleE9mIiwic3Vic3RyaW5nIiwibGFzdE51bSIsInN1YnN0ciIsImZpcnN0MTVOdW0iLCJuZXdBcnIiLCJBcnJheSIsImkiLCJwdXNoIiwiYXJySmlTaHUiLCJhcnJKaVNodTIiLCJhcnJPdVNodSIsImoiLCJwYXJzZUludCIsImppc2h1X2NoaWxkMSIsImppc2h1X2NoaWxkMiIsImgiLCJzdW1KaVNodSIsInN1bU91U2h1Iiwic3VtSmlTaHVDaGlsZDEiLCJzdW1KaVNodUNoaWxkMiIsInN1bVRvdGFsIiwibSIsIm4iLCJwIiwiayIsImx1aG0iLCJpc051bWJlciIsImFyZ3VtZW50cyIsImZsYWciLCJsZW4iLCJpc05hTiIsIk51bWJlciIsImNyZWRpdENvZGUiLCJjb2RlIiwiaXNFbXB0eSIsImJhc2VDb2RlIiwiYmFzZUNvZGVBcnJheSIsInNwbGl0IiwiY29kZXMiLCJjb2RlQXJyYXkiLCJjaGVjayIsIndpIiwic3VtIiwia2V5IiwiZW1haWwiLCJtb2JpbGUiLCJ1cmwiLCJzdHIiLCJtYXRjaCIsImNoaW5lc2UiLCJjaGFyQ29kZUF0IiwidmluIiwic0tZWkYiLCJzSllXIiwiYmwiLCJibEtZWkYiLCJpSlFTIiwiaW50VGVtcCIsImh0IiwiaHRaTSIsInRvVXBwZXJDYXNlIiwidG9TdHJpbmciLCJlcnIiLCJ1dGlsIiwiUmVnIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLE9BQU9BLE1BQVAsSUFBaUIsV0FBckIsRUFBa0M7QUFBRUEsV0FBU0MsUUFBVDtBQUFvQjtBQUN4RCxJQUFJQyxNQUFN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QW1CO0FBQ2pCSixxQkFBTyxHQUFQO0FBQ0QsYUFGRCxNQUVPO0FBQ0xBLHFCQUFPSSxRQUFRSSxRQUFSLEVBQVA7QUFDRDtBQUNELGdCQUFJUixRQUFRRixLQUFJakQsTUFBSixDQUFXLENBQVgsRUFBYyxDQUFkLENBQVosRUFBOEJvRCxLQUFLLElBQUw7QUFDL0IsV0FSRCxNQVFPO0FBQ0xBLGlCQUFLLEtBQUw7QUFDRDtBQUNGLFNBdEJELENBc0JFLE9BQU9RLEdBQVAsRUFBWTtBQUNaUixlQUFLLEtBQUw7QUFDRDtBQUNGO0FBQ0QsYUFBT0EsRUFBUDtBQUNEO0FBdktPO0FBRGUsQ0FBM0I7O0FBNEtBdkUsSUFBSU8sR0FBSixHQUFVUCxJQUFJZ0YsSUFBSixDQUFTQyxHQUFuQjs7QUFFQUMsT0FBT0MsT0FBUCxHQUFpQm5GLEdBQWpCIiwiZmlsZSI6Imhvby51dGlsLnJlZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImlmICh0eXBlb2Ygd2luZG93ID09ICd1bmRlZmluZWQnKSB7IHdpbmRvdyA9IGdldEFwcCgpOyB9XHJcbnZhciBIb28gPSB3aW5kb3cuSG9vIHx8IHt9O1xyXG5cclxubGV0IFJFR19NT0JJTEUgPSAnJztcclxubGV0IEFyciA9IFtdLEJyciA9IFtdO1xyXG5BcnJbJ0EnXSA9IDE7QXJyWydCJ10gPSAyO0FyclsnQyddID0gMztBcnJbJ0QnXSA9IDQ7QXJyWydFJ10gPSA1O0FyclsnRiddID0gNjtBcnJbJ0cnXSA9IDc7QXJyWydIJ10gPSA4O0FyclsnSiddID0gMTtBcnJbJ0snXSA9IDI7QXJyWydMJ10gPSAzO0FyclsnTSddID0gNDtBcnJbJ04nXSA9IDU7QXJyWydQJ10gPSA3O0FyclsnUiddID0gOTtBcnJbJ1MnXSA9IDI7QXJyWydUJ10gPSAzO0FyclsnVSddID0gNDtBcnJbJ1YnXSA9IDU7QXJyWydXJ10gPSA2O0FyclsnWCddID0gNztBcnJbJ1knXSA9IDg7QXJyWydaJ10gPSA5O0FyclsnMSddID0gMTtBcnJbJzInXSA9IDI7QXJyWyczJ10gPSAzO0FyclsnNCddID0gNDtBcnJbJzUnXSA9IDU7QXJyWyc2J10gPSA2O0FyclsnNyddID0gNztBcnJbJzgnXSA9IDg7QXJyWyc5J10gPSA5O0FyclsnMCddID0gMDtCcnJbMV0gPSA4O0JyclsyXSA9IDc7QnJyWzNdID0gNjtCcnJbNF0gPSA1O0Jycls1XSA9IDQ7QnJyWzZdID0gMztCcnJbN10gPSAyO0Jycls4XSA9IDEwO0Jycls5XSA9IDA7QnJyWzEwXSA9IDk7QnJyWzExXSA9IDg7QnJyWzEyXSA9IDc7QnJyWzEzXSA9IDY7QnJyWzE0XSA9IDU7QnJyWzE1XSA9IDQ7QnJyWzE2XSA9IDM7QnJyWzE3XSA9IDI7XHJcblxyXG5cclxuSG9vLmRlZmluZSgnSG9vLnV0aWwuUmVnJywge1xyXG4gIHN0YXRpY3MgOiB7XHJcbiAgICAvKioqIOaJp+ihjOato+WImeagoemqjCAqL1xyXG4gICAgZXhlYzogZnVuY3Rpb24gKHJlZywgdmFsdWUpIHtcclxuICAgICAgaWYgKHR5cGVvZiByZWcgPT0gJ3VuZGVmaW5lZCcgfHwgbnVsbCA9PSByZWcgfHwgdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICByZWcgPSBuZXcgUmVnRXhwKHJlZyk7XHJcbiAgICAgIHJldHVybiByZWcudGVzdCh2YWx1ZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqKiDpk7booYzljaHmoKHpqowgKi9cclxuICAgIGJhbmtDYXJkIDogZnVuY3Rpb24oY2FyZE51bSl7XHJcbiAgICAgIGlmIChjYXJkTnVtLmxlbmd0aCA8IDE2IHx8IGNhcmROdW0ubGVuZ3RoID4gMTkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIG51bSA9IC9eXFxkKiQvOyAgLy/lhajmlbDlrZdcclxuICAgICAgaWYgKCFudW0uZXhlYyhjYXJkTnVtKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICAvL+W8gOWktDbkvY1cclxuICAgICAgdmFyIHN0ckJpbiA9IFwiMTAsMTgsMzAsMzUsMzcsNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTEsNTIsNTMsNTQsNTUsNTYsNTgsNjAsNjIsNjUsNjgsNjksODQsODcsODgsOTQsOTUsOTgsOTlcIjtcclxuICAgICAgaWYgKHN0ckJpbi5pbmRleE9mKGNhcmROdW0uc3Vic3RyaW5nKDAsIDIpKSA9PSAtMSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgbGFzdE51bSA9IGNhcmROdW0uc3Vic3RyKGNhcmROdW0ubGVuZ3RoIC0gMSwgMSk7Ly/lj5blh7rmnIDlkI7kuIDkvY3vvIjkuI5sdWht6L+b6KGM5q+U6L6D77yJXHJcblxyXG4gICAgICB2YXIgZmlyc3QxNU51bSA9IGNhcmROdW0uc3Vic3RyKDAsIGNhcmROdW0ubGVuZ3RoIC0gMSk7Ly/liY0xNeaIljE45L2NXHJcbiAgICAgIHZhciBuZXdBcnIgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgZm9yICh2YXIgaSA9IGZpcnN0MTVOdW0ubGVuZ3RoIC0gMTsgaSA+IC0xOyBpLS0pIHsgICAgLy/liY0xNeaIljE45L2N5YCS5bqP5a2Y6L+b5pWw57uEXHJcbiAgICAgICAgbmV3QXJyLnB1c2goZmlyc3QxNU51bS5zdWJzdHIoaSwgMSkpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBhcnJKaVNodSA9IG5ldyBBcnJheSgpOyAgLy/lpYfmlbDkvY0qMueahOenryA8OVxyXG4gICAgICB2YXIgYXJySmlTaHUyID0gbmV3IEFycmF5KCk7IC8v5aWH5pWw5L2NKjLnmoTnp68gPjlcclxuXHJcbiAgICAgIHZhciBhcnJPdVNodSA9IG5ldyBBcnJheSgpOyAgLy/lgbbmlbDkvY3mlbDnu4RcclxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZXdBcnIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBpZiAoKGogKyAxKSAlIDIgPT0gMSkgey8v5aWH5pWw5L2NXHJcbiAgICAgICAgICBpZiAocGFyc2VJbnQobmV3QXJyW2pdKSAqIDIgPCA5KVxyXG4gICAgICAgICAgICBhcnJKaVNodS5wdXNoKHBhcnNlSW50KG5ld0FycltqXSkgKiAyKTtcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgYXJySmlTaHUyLnB1c2gocGFyc2VJbnQobmV3QXJyW2pdKSAqIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIC8v5YG25pWw5L2NXHJcbiAgICAgICAgICBhcnJPdVNodS5wdXNoKG5ld0FycltqXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBqaXNodV9jaGlsZDEgPSBuZXcgQXJyYXkoKTsvL+Wlh+aVsOS9jSoyID45IOeahOWIhuWJsuS5i+WQjueahOaVsOe7hOS4quS9jeaVsFxyXG4gICAgICB2YXIgamlzaHVfY2hpbGQyID0gbmV3IEFycmF5KCk7Ly/lpYfmlbDkvY0qMiA+OSDnmoTliIblibLkuYvlkI7nmoTmlbDnu4TljYHkvY3mlbBcclxuICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCBhcnJKaVNodTIubGVuZ3RoOyBoKyspIHtcclxuICAgICAgICBqaXNodV9jaGlsZDEucHVzaChwYXJzZUludChhcnJKaVNodTJbaF0pICUgMTApO1xyXG4gICAgICAgIGppc2h1X2NoaWxkMi5wdXNoKHBhcnNlSW50KGFyckppU2h1MltoXSkgLyAxMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBzdW1KaVNodSA9IDA7IC8v5aWH5pWw5L2NKjIgPCA5IOeahOaVsOe7hOS5i+WSjFxyXG4gICAgICB2YXIgc3VtT3VTaHUgPSAwOyAvL+WBtuaVsOS9jeaVsOe7hOS5i+WSjFxyXG4gICAgICB2YXIgc3VtSmlTaHVDaGlsZDEgPSAwOyAvL+Wlh+aVsOS9jSoyID45IOeahOWIhuWJsuS5i+WQjueahOaVsOe7hOS4quS9jeaVsOS5i+WSjFxyXG4gICAgICB2YXIgc3VtSmlTaHVDaGlsZDIgPSAwOyAvL+Wlh+aVsOS9jSoyID45IOeahOWIhuWJsuS5i+WQjueahOaVsOe7hOWNgeS9jeaVsOS5i+WSjFxyXG4gICAgICB2YXIgc3VtVG90YWwgPSAwO1xyXG4gICAgICBmb3IgKHZhciBtID0gMDsgbSA8IGFyckppU2h1Lmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgc3VtSmlTaHUgPSBzdW1KaVNodSArIHBhcnNlSW50KGFyckppU2h1W21dKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBhcnJPdVNodS5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgIHN1bU91U2h1ID0gc3VtT3VTaHUgKyBwYXJzZUludChhcnJPdVNodVtuXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgamlzaHVfY2hpbGQxLmxlbmd0aDsgcCsrKSB7XHJcbiAgICAgICAgc3VtSmlTaHVDaGlsZDEgPSBzdW1KaVNodUNoaWxkMSArIHBhcnNlSW50KGppc2h1X2NoaWxkMVtwXSk7XHJcbiAgICAgICAgc3VtSmlTaHVDaGlsZDIgPSBzdW1KaVNodUNoaWxkMiArIHBhcnNlSW50KGppc2h1X2NoaWxkMltwXSk7XHJcbiAgICAgIH1cclxuICAgICAgLy/orqHnrpfmgLvlkoxcclxuICAgICAgc3VtVG90YWwgPSBwYXJzZUludChzdW1KaVNodSkgKyBwYXJzZUludChzdW1PdVNodSkgKyBwYXJzZUludChzdW1KaVNodUNoaWxkMSkgKyBwYXJzZUludChzdW1KaVNodUNoaWxkMik7XHJcblxyXG4gICAgICAvL+iuoeeul0x1aG3lgLxcclxuICAgICAgdmFyIGsgPSBwYXJzZUludChzdW1Ub3RhbCkgJSAxMCA9PSAwID8gMTAgOiBwYXJzZUludChzdW1Ub3RhbCkgJSAxMDtcclxuICAgICAgdmFyIGx1aG0gPSAxMCAtIGs7XHJcblxyXG4gICAgICByZXR1cm4gbGFzdE51bSA9PSBsdWhtOyAgXHJcbiAgICB9LFxyXG4gICAgaXNOdW1iZXIgOiBmdW5jdGlvbigpe1xyXG4gICAgICBpZihhcmd1bWVudHMubGVuZ3RoID09IDApeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgdmFyIGZsYWcgPSB0cnVlLCByZWcgPSAvXlswLTldKy4/WzAtOV0qJC8sIG51bTtcclxuICAgICAgZm9yKHZhciBpPTAsbGVuID0gYXJndW1lbnRzLmxlbmd0aDtpPGxlbjtpKyspe1xyXG4gICAgICAgIG51bSA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICBpZiAodHlwZW9mIG51bSA9PSAndW5kZWZpbmVkJyB8fCBudWxsID09IG51bSB8fCBpc05hTihOdW1iZXIobnVtKSkpeyBmbGFnID0gZmFsc2U7IGJyZWFrO31cclxuICAgICAgICAvL2lmICh0eXBlb2YgbnVtID09ICd1bmRlZmluZWQnIHx8IG51bGwgPT0gbnVtIHx8ICFyZWcudGVzdChudW0pKSB7IGZsYWcgPSBmYWxzZTsgYnJlYWs7IH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmxhZztcclxuICAgIH0sXHJcbiAgICAvKioqIOe7n+S4gOekvuS8muS/oeeUqOS7o+eggSAqL1xyXG4gICAgY3JlZGl0Q29kZSA6IGZ1bmN0aW9uKGNvZGUpe1xyXG4gICAgICBpZih0eXBlb2YgY29kZSA9PSAndW5kZWZpbmVkJyB8fCBIb28uaXNFbXB0eShjb2RlKSB8fCBjb2RlLmxlbmd0aCAhPSAxOCl7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICB2YXIgYmFzZUNvZGUgPSBcIjAxMjM0NTY3ODlBQkNERUZHSEpLTE1OUFFSVFVXWFlcIiwgYmFzZUNvZGVBcnJheSA9IGJhc2VDb2RlLnNwbGl0KFwiXCIpLGNvZGVzID0ge307XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmFzZUNvZGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb2Rlc1tiYXNlQ29kZUFycmF5W2ldXSA9IGk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGNvZGVBcnJheSA9IGNvZGUuc3BsaXQoXCJcIiksY2hlY2sgPSBjb2RlQXJyYXlbMTddO1xyXG4gICAgICBpZiAoYmFzZUNvZGUuaW5kZXhPZihjaGVjaykgPCAwKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICB2YXIgd2kgPSBbIDEsIDMsIDksIDI3LCAxOSwgMjYsIDE2LCAxNywgMjAsIDI5LCAyNSwgMTMsIDgsIDI0LCAxMCwgMzAsIDI4IF0sc3VtID0gMDtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNzsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGNvZGVBcnJheVtpXTtcclxuICAgICAgICBpZiAoYmFzZUNvZGUuaW5kZXhPZihrZXkpID09IC0xKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIHN1bSArPSAoY29kZXNba2V5XSAqIHdpW2ldKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgdmFsdWUgPSAzMSAtIHN1bSAlIDMxO1xyXG4gICAgICByZXR1cm4gdmFsdWUgPT0gY29kZXNbY2hlY2tdO1xyXG4gICAgfSxcclxuICAgIC8qKiog6YKu566x5qCh6aqMICovXHJcbiAgICBlbWFpbCA6IGZ1bmN0aW9uKGVtYWlsKXtcclxuICAgICAgaWYgKHR5cGVvZiBlbWFpbCA9PSAndW5kZWZpbmVkJyB8fCBudWxsID09IGVtYWlsKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICB2YXIgcmVnID0gL15bYS16MC05XSsoWy5fXFxcXC1dKlthLXowLTldKSpAKFthLXowLTldK1stYS16MC05XSpbYS16MC05XSsuKXsxLDYzfVthLXowLTldKyQvO1xyXG4gICAgICByZXR1cm4gcmVnLnRlc3QoZW1haWwpO1xyXG4gICAgfSxcclxuICAgIC8qKiog5omL5py65Y+35qCh6aqMICovXHJcbiAgICBtb2JpbGU6IGZ1bmN0aW9uIChtb2JpbGUpIHtcclxuICAgICAgaWYgKHR5cGVvZiBtb2JpbGUgPT0gJ3VuZGVmaW5lZCcgfHwgbnVsbCA9PSBtb2JpbGUpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgIHZhciByZWcgPSAvXjFbM3w0fDV8N3w4XVswLTldezl9JC87IC8vIC9eMVswLTldezEwfSQvXHJcbiAgICAgIHJldHVybiByZWcudGVzdChtb2JpbGUpO1xyXG4gICAgfSxcclxuICAgIC8qKiogd2ViIFVSTCDmoKHpqowgKi9cclxuICAgIHVybDogZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICBpZiAodHlwZW9mIHN0ciA9PSAndW5kZWZpbmVkJyB8fCBudWxsID09IHN0cikgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgcmV0dXJuICEhc3RyLm1hdGNoKC8oKCheaHR0cHM/Oig/OlxcL1xcLyk/KSg/OlstOzomPVxcK1xcJCxcXHddK0ApP1tBLVphLXowLTkuLV0rfCg/Ond3dy58Wy07OiY9XFwrXFwkLFxcd10rQClbQS1aYS16MC05Li1dKykoKD86XFwvW1xcK34lXFwvLlxcdy1fXSopP1xcPz8oPzpbLVxcKz0mOyVALlxcd19dKikjPyg/OltcXHddKikpPykkL2cpO1xyXG4gICAgfSxcclxuICAgIC8qKiog5piv5ZCm5YWo5Li65Lit5paHICovXHJcbiAgICBjaGluZXNlIDogZnVuY3Rpb24oc3RyKXtcclxuICAgICAgLy92YXIgcmVnID0gL15bdTRFMDAtdTlGQTVdKyQvOyDjgJDmmK/lkKbljIXlkKvkuK3mlofjgJFcclxuICAgICAgLy9yZXR1cm4gdHlwZW9mIHN0ciAhPT0gJ3VuZGVmaW5lZCcgJiYgbnVsbCAhPSBzdHIgJiYgIXJlZy50ZXN0KHN0cik7XHJcbiAgICAgIGlmICh0eXBlb2Ygc3RyID09ICd1bmRlZmluZWQnIHx8IG51bGwgPT0gc3RyIHx8ICcnID09IHN0cikgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgdmFyIGZsYWcgPSB0cnVlO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChzdHIuY2hhckNvZGVBdChpKSA8PSAyNTUpIHsgZmxhZyA9IGZhbHNlOyBicmVhazsgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmbGFnO1xyXG4gICAgfSxcclxuICAgIC8qKiogdmluIOajgOa1iyDkvovvvJogV1AwQUEyOTc4QkwwMTI5NzYgKi9cclxuICAgIHZpbjogZnVuY3Rpb24gKHZpbikge1xyXG4gICAgICB2YXIgc0tZWkYgPSBcIkFCQ0RFRkdISktMTU5QUlNUVVZXWFlaMTIzNDU2Nzg5MFwiO1xyXG4gICAgICB2YXIgc0pZVyA9ICcnO1xyXG4gICAgICB2YXIgYmwgPSBmYWxzZTtcclxuICAgICAgdmFyIGJsS1laRiA9IGZhbHNlO1xyXG4gICAgICBpZiAodmluLmxlbmd0aCA9PSAxNykge1xyXG4gICAgICAgIHZhciBpSlFTID0gMCwgaW50VGVtcCA9IDAsIGh0ID0gQXJyLCBodFpNID0gQnJyO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB2aW4gPSB2aW4udG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmluLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChzS1laRi5pbmRleE9mKHZpbi5zdWJzdHIoaSwgMSkpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgYmxLWVpGID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBpSlFTID0gaUpRUyArIHBhcnNlSW50KGh0W3Zpbi5zdWJzdHIoaSwgMSldKSAqIHBhcnNlSW50KGh0Wk1bKGkgKyAxKV0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGJsS1laRiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoYmxLWVpGKSB7XHJcbiAgICAgICAgICAgIGludFRlbXAgPSBpSlFTICUgMTE7XHJcbiAgICAgICAgICAgIGlmIChpbnRUZW1wID09IDEwKSB7XHJcbiAgICAgICAgICAgICAgc0pZVyA9IFwiWFwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNKWVcgPSBpbnRUZW1wLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNKWVcgPT0gdmluLnN1YnN0cig4LCAxKSkgYmwgPSB0cnVlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYmwgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGJsID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBibDtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG5cclxuSG9vLnJlZyA9IEhvby51dGlsLlJlZztcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSG9vOyJdfQ==